!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e="undefined"!=typeof globalThis?globalThis:e||self).vulture=i()}(this,(function(){"use strict";const e=[{field:"about",priority:1},{field:"aboutMe",priority:1},{field:"accept",priority:1},{field:"address",priority:1},{field:"agree",priority:1},{field:"bio",priority:1},{field:"city",priority:1},{field:"confirmPassword",priority:1},{field:"consent",priority:1},{field:"country",priority:1},{field:"coverPic",priority:0},{field:"dateOfBirth",priority:1},{field:"dob",priority:1},{field:"description",priority:1},{field:"education",priority:1},{field:"email",priority:1},{field:"firstName",priority:1},{field:"fname",priority:1},{field:"fullName",priority:1},{field:"gender",priority:1},{field:"initials",priority:0},{field:"interests",priority:0},{field:"isBlocked",priority:0},{field:"isDeleted",priority:0},{field:"isEmailVerified",priority:0},{field:"isVerified",priority:0},{field:"lastLoginAt",priority:0},{field:"lastName",priority:1},{field:"name",priority:1},{field:"location",priority:1},{field:"middleName",priority:0},{field:"mobile",priority:1},{field:"nameSurname",priority:0},{field:"nickName",priority:0},{field:"occupation",priority:1},{field:"other",priority:0},{field:"password",priority:1},{field:"phone",priority:1},{field:"policy",priority:1},{field:"postalCode",priority:1},{field:"profilePic",priority:0},{field:"profileStatus",priority:0},{field:"profileType",priority:0},{field:"profileVisibility",priority:0},{field:"resume",priority:0},{field:"sex",priority:1},{field:"skills",priority:1},{field:"state",priority:1},{field:"terms",priority:1},{field:"timezone",priority:0},{field:"title",priority:0},{field:"updatedAt",priority:0},{field:"username",priority:0},{field:"website",priority:0},{field:"workExperience",priority:1}],i=e=>Array.isArray(e)&&e.length>0,t=new Set(["com","net","org","edu","gov","mil","co","io","tech","dev","info","biz","me","us","uk","ca","au","in","eu","de","fr","xyz","site","online","store","blog","app"]),r=new Set(["10minutemail.com","temp-mail.org","guerrillamail.com","mailinator.com","yopmail.com","fakemailgenerator.com","sharklasers.com","dispostable.com","throwawaymail.com","getnada.com","trashmail.com","mintemail.com","spambog.com","maildrop.cc","spamex.com","mytrashmail.com","boun.cr","tmail.io","mailpoof.com","spamavert.com","harakirimail.com","tempmail.com","tempmail.net","emailtemporario.com.br"]),o=new Set(["gmail.com","yahoo.com","outlook.com","hotmail.com","aol.com","icloud.com","protonmail.com","yandex.com","mail.com","zoho.com","gmx.com","fastmail.com","tutanota.com","live.com","msn.com","me.com","qq.com","naver.com","rediffmail.com","rocketmail.com","inbox.com","btinternet.com","shaw.ca","telus.net","cox.net","sbcglobal.net","verizon.net","att.net","comcast.net","optonline.net","bigpond.com","bluewin.ch","earthlink.net","mac.com","web.de","126.com","163.com","yeah.net","lycos.com"]),n=["123456","password","123456789","12345678","12345","1234567","qwerty","abc123","password1","111111","123123","admin","welcome","letmein","monkey","football","iloveyou","sunshine","1234","princess","dragon","baseball","superman","trustno1","shadow","buster","qwerty123","batman","whatever","password123","qazwsx","1q2w3e4r","123qwe","123abc","654321","7777777"];function a(t=[],{strict:r=!1,augment:o}){const n=e.filter((e=>1===e.priority)).map((e=>new RegExp(e.field,"i")));i(o)&&n.push(...o.map((e=>new RegExp(e,"i"))));const a=t.filter((e=>n.some((i=>i.test(e.name))))).filter((e=>!/other/i.test(e.name))),l=t.filter((e=>!a.includes(e)||/other/i.test(e.name)));return{priority:a,non_priority:l}}function l(e,i=!1){if("string"!=typeof e||e.length<6||e.length>255)return{valid:!1,reason:"Invalid email length"};const n=e.match(/^[a-zA-Z0-9._%+-]+@([a-zA-Z0-9-]+\.[a-zA-Z]{2,})$/);if(!n)return{valid:!1,reason:"Invalid email format"};const a=n[1].toLowerCase(),l=a.split(".").pop();return r.has(a)?{valid:!1,reason:"Temporary email addresses are not allowed"}:i&&!o.has(a)?{valid:!1,reason:"Temporary or custom email addresses are not allowed"}:t.has(l)?{valid:!0,reason:"Valid email âœ…"}:{valid:!1,reason:"Invalid domain extension"}}function s(e){let i=0;return n.includes(e.toLowerCase())?{strength:"Very Weak âŒ",message:"This password is too common!"}:(e.length>=8&&i++,e.length>=12&&i++,/[a-z]/.test(e)&&i++,/[A-Z]/.test(e)&&i++,/[0-9]/.test(e)&&i++,/[^a-zA-Z0-9]/.test(e)&&i++,i<=2?{strength:"Weak âŒ",message:"Try adding numbers & symbols."}:3===i?{strength:"Medium âš ï¸",message:"Make it longer & mix characters."}:4===i?{strength:"Strong âœ…",message:"Good, but longer is better!"}:{strength:"Very Strong ðŸ’ª",message:"Great password! ðŸ”¥"})}function m(e,i=[]){const t={hyphens:"-",spaces:" ",dots:"."},r=i.includes("+")||i.includes("all"),o=r?"\\+?":"";let n="";n=i.includes("all")?Object.values(t).join(""):i.filter((e=>t[e])).map((e=>t[e])).join("");if(new RegExp(`^(?=(?:.*\\d){10,})${o}[${"0-9"+n}]+$`).test(e))return{valid:!0,reason:"Valid"};if((e.match(/\d/g)||[]).length<10)return{valid:!1,reason:"At least 10 digits required"};{let e="0-9";return r&&(e+=", +"),(i.includes("hyphens")||i.includes("all"))&&(e+=", -"),(i.includes("spaces")||i.includes("all"))&&(e+=", space"),(i.includes("dots")||i.includes("all"))&&(e+=", ."),{valid:!1,reason:"Invalid format. Allowed: "+e}}}function d(e,t,r,o,n=[]){let a=[];for(const i of e){const e=n.find((e=>e.field===i.name))||null;if(""===i.value||null===i.value||void 0===i.value){if(e){const t=e.required?e.required:null;a.push({field:i.name,message:t||`${i.name} is required`})}else a.push({field:i.name,message:`${i.name} is required`});break}if("checkbox"===i.type&&!1===i.value){if(e){const t=e.required?e.required:null;a.push({field:i.name,message:t||`${i.name} is required`})}else a.push({field:i.name,message:`${i.name} is required`});break}if(/phone/.test(i.name)||/mobile/.test(i.name)){const{valid:t,reason:r}=m(i.value,o);if(!t){if(e){const t=e.not_valid?e.not_valid:null;a.push({field:i.name,message:t||r})}else a.push({field:i.name,message:r});break}}if(/name/.test(i.name)&&("null"===i.value.toLocaleLowerCase()||"undefined"===i.value.toLocaleLowerCase()||"none"===i.value.toLocaleLowerCase())){a.push({field:i.name,message:"This name is not allowed."});break}if("email"===i.type){const{valid:r,reason:o}=l(i.value,t);if(!r)if(e){const t=e.not_valid?e.not_valid:null;a.push({field:i.name,message:t||o})}else a.push({field:i.name,message:o})}if(t&&"password"===i.type){const{strength:t,message:r}=s(i.value);if(t.includes("Weak"))if(e){const t=e.weak?e.weak:null;a.push({field:i.name,message:t||r})}else a.push({field:i.name,message:r})}if(t&&/name/i.test(i.name)){const{min:t,max:o}={min:Array.from(r)[0],max:Array.from(r)[1]};if(i.value.length<t)if(e){const t=e.min?e.min:null;a.push({field:i.name,message:t||`${i.name} must be at least ${t} characters`})}else a.push({field:i.name,message:`${i.name} must be at least ${t} characters`});if(i.value.length>o)if(e){const t=e.max?e.max:null;a.push({field:i.name,message:t||`${i.name} must not be greater than ${t} characters`})}else a.push({field:i.name,message:`${i.name} must not be greater than ${o} characters`})}}if(i(e)){const i=e.filter((e=>"password"===e.type.toLocaleLowerCase()));if(2===i.length&&(/password/i.test(i[0].name)&&/confirm/i.test(i[1].name)||/password/i.test(i[1].name)&&/confirm/i.test(i[0].name))){const e=n.find((e=>e.field===i[1].name))||null;if(i[0].value!==i[1].value)if(e){const t=e.mis_match?e.mis_match:null;a.push({field:i[1].name,message:t||"Passwords do not match"})}else a.push({field:i[1].name,message:"Passwords do not match"})}}return{fields:e,errors:a}}const c=["submit","reset"];function f(e){const t=[],r=e.querySelectorAll("input[name], select[name], textarea[name]");for(const i of r)if(!c.includes(i.type))if("radio"===i.type){const r=e.querySelectorAll(`input[name="${i.name}"][type="radio"]`),o=Array.from(r).find((e=>e.checked));o?t.some((e=>e.name===i.name&&e.type===i.type&&e.value===o.value))||t.push({name:i.name,type:i.type,value:o.value}):t.some((e=>e.name===i.name&&e.type===i.type&&""===e.value))||t.push({name:i.name,type:i.type,value:""})}else t.push({name:i.name,type:i.type,value:"checkbox"===i.type?i.checked:i.value});if(i(t))return t;throw new Error("No fields found in the form || Please make a valid form.")}function u(e,t=[]){i(t)&&console.error("Invalid data returned by talon.");for(const r of e){const e=document.getElementById(r.id);!r.class&&e.classList.add("error");const o=i(t)&&t.find((i=>i.field===e.id));e.textContent=o?p(o.message):""}}function p(e){const i=(e[0].toLocaleUpperCase()+e.slice(1)).replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(" ");return`${i[0]} ${i.slice(1).join(" ").toLocaleLowerCase()}`}let y,h=[],g=!1;const v=[],b=[];return{connect:e=>{y=document.getElementById(e)||document.querySelector(`.${e}`);let t=y?new Set([...y.querySelectorAll("input[name], select[name], textarea[name]")].map((e=>e.name))).size:0;const r=Array.from(y.querySelectorAll(".error"));if(i(r))for(const e of r)b.push({id:e.id,class:"error"});y?console.log(`Vulture protection to ${y.id||y.className}(${t}) \nVisit https://vulturejs.github.io`):console.error(`Form ID error: MultiConnect reduired Form ID,\nForm index: ${h.length+1} has no ID or Form IDs are more than forms.`)},multiConnect:e=>{let t=!1;for(const r of e){const o=document.getElementById(r);o?h.push(o):(console.error(`Form ID error: MultiConnect required Form ID,\nForm index: ${h.length+1} has no ID or Form IDs are more than forms.`),t=!0);const n=Array.from(o.querySelectorAll(".error"));if(i(n))for(const e of n)b.push({id:e.id,class:"error"});if(t=!1,h.length===e.length)break}g=!0,i(e)&&!t&&console.log(`Vulture protection to ${h.map((e=>`${e.id}(${e?new Set([...e.querySelectorAll("input[name], select[name], textarea[name]")].map((e=>e.name))).size:0})`)).join(", ")}\nVisit https://vulturejs.github.io`)},talon:({strict:e=!1,augment:t=null,render_error:r=!0,minmax:o=[2,50],phoneRules:n=[],combine:l}={})=>{const s=f(y),{priority:m,non_priority:c}=a(s,{strict:e,augment:t}),{fields:p,errors:h}=d(m,e,o,n,v);if(r&&u(b,h),i(h)||!i(p))return{errors:h};const g=[...new Set([...p,...c])],w="object"==typeof(x=l)&&null!==x?function({fieldsGroup:e=[],fieldsToCombine:t=[],attributes:r=[],method:o=""}){if(!i(e)||!i(t))throw new Error("Please provide `fieldsGroup` and `fieldsToCombine` to combiner");const n=e.slice();return t.forEach(((i,t)=>{const a=e.find((e=>e.name===i[0])),l=e.find((e=>e.name===i[1]));if(!a||!l)throw new Error(`Fields to combine not found: ${i[0]}, ${i[1]}`);const s={space:" ",hyphen:"-",dot:".",underscore:"_"}[o]||" ",m=[a.value,l.value].join(s),d=r[t]?.name||a.name,c=r[t]?.type||"text";n.push({name:d,type:c,value:m}),n.splice(n.indexOf(a),1),n.splice(n.indexOf(l),1)})),n}({fieldsGroup:g,...l}):null;var x;return{fields:w||g}},talonAll:(e,{strict:t=!1,augment:r=null,render_error:o=!0,minmax:n=[2,50],phoneRules:l=[]}={})=>{t||(t=!1),r||(r=null),g&&(y=h[e]);const s=f(y),{priority:m,non_priority:c}=a(s,{strict:t,augment:r}),{fields:p,errors:w}=d(m,t,n,l,v);if(o&&u(b,w),i(w)||!i(p))return{errors:w};return{formId:y.id,fields:[...new Set([...p,...c])]}},formatter:e=>{let i={};return e.forEach((e=>{i[e.name]=e.value})),i},error:(e,i)=>{const t=b.find((i=>i.id===e));if(t){const e=document.getElementById(t.id);!t.class&&e.classList.add("error"),e.textContent=i}},defError:(e=[])=>{i(e)&&v.push(...e)}}}));
